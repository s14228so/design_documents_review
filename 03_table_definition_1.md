# テーブル定義書1
## 全体
- カラム名に自身のテーブル名を含まないようしてください。
- user_l_namemなど略語を使わないようにしましょう。
- created_atが全てユーザ登録日時になっている。
- updated_atが全てユーザ更新日時になっている。
- テーブル名が小文字の複数形になっていない
- ユーザーの配送先を保持するためのカラムがない
- 商品を入荷するためのテーブルがない

## Admin
- 主キーがない
- idにAUTO INCREMENTを適用してない
- テーブル名が大文字で単数形になっている

## Users
- 退会ステータスのデータ型が違うのとtrueとfalseが何を表すか不明
- 郵便番号と住所のデータ型がstiringだと先頭の0を認識できないためintegerにしていることを備考に記載されていない

## Products
- ジャンル、レーベル、アーティストIDのFKがない
- 在庫の個数で在庫ステータスは判別できるのでこのカラム入らない
- 在庫数は入荷数と販売数との差であらわせるのと可読性が悪くなるためいらない

## Discs
- ディスク番号を管理するカラムがない


## Songs
- songのidがない
- 曲名のデータ型がintegerになってる

## Labels
- labelのidがない
- product_idはlabelsテーブルの子要素のためいらない

## Artists
- artistのidがない
- アーティスト名のデータ型がintegerになってる
- product_idはartistsテーブルの子要素のためいらない

## Genres
- genreのidがない
- ジャンル名のデータ型がintegerになってる
- product_idはgenresテーブルの子要素のためいらない

## Cart_items
- cart_itemのidがない
- 商品IDのデータ型が記載されてない
- products_idとなっていて単数形になっていない
- buy numとなっているのでスネークケースを用いるかamountなどわかりやすいカラムに変更した方が良い

## Buy_details
- テーブル名やそれに関するカラムが管理者視点になっていない
- buyテーブルとのリレーションが定義されていない
- productsテーブルとのリレーションが定義されていない
- 小計価格ではなく購入時の価格を保持するカラムにした方が良い
- buy numとなっているのでスネークケースを用いるかamountなどわかりやすいカラムに変更した方が良い

## Buy
- テーブル名やそれに関するカラムが管理者視点になっていない
- 購入日カラムがいらない
- 支払い方法の詳細のカラムが動詞になっているのでpaymentなどの名詞を使う必要があるのと支払い方法はenumで管理してそれに対応したデータ型であるintegerにしなければいけない
- 支払い合計のカラム名がstockになっているのでsumなど合計を表すカラム名にする必要がある
- 消費税に関するカラムがない
- 送付先住所と一緒に必要な郵便番号と氏名がない

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。




# フィードバック（清水）
[add]→付け加えなければいけないところ
[fix]→修正が必要なところ
[comment]→その他コメント（修正ではないけど、確認して欲しいポイントです）

## 全体
- [add]created_atが全てユーザ登録日時になっている。
- [add]updated_atが全てユーザ更新日時になっている。
- [add]PKのカラム名はidであるということと、そもそもPKがないテーブルがあるので指摘。
- [add]テーブル名は小文字の複数形。スネークケースを使う。
- [add]ユーザーが複数住所を登録することを考慮できていない。複数住所を登録するためのテーブルが別に必要。
- [add]商品が入荷される情報を管理するためのテーブルが必要。

## Admin
- [add]命名。adminsテーブルにする。

## Songs
- [fix]↑これはusersテーブルに関する指摘ですよね？？
- 退会ステータスのデータ型が違うのとtrueとfalseが何を表すか不明
　- [fix]defultでfalseとなっているということは、ユーザーステータスをtrue or falseのbool型で表現するという意味。のであるならば、データ型はstringでない。
- [add]郵便番号がinteger型。integerではいけない理由はわかりますか？ヒントは0から始まる番号をintegerで管理するとどうなるかです。
- [add]電話番号がinteger型。上と同じ理由。

## Products
- 在庫ステータスのデータ型が違うのと何を表しているかわからない
　- [fix]在庫の個数で在庫ステータスは判別できるのでこのカラム自体不要
- [add]在庫数カラムは（入荷数）ー（販売数）で計算できる数値なので不要。基本的に、計算後のデータはデータテーブルに保存しない。理由はわかりますか？？？
- [add]disc_idをFKで持つということは、productが子要素、discが親要素になるということです。逆ですね。

## [add]discs
- [add]ディスクの番号を管理したいですが、トラックナンバーを管理する必要はないですね。

## Labels
- [add]product_idは不要ですね。理由はわかりますか？？？

## Artists
- [add]product_idは不要ですね。

## Genres
- [add]product_idは不要ですね。

## Cart_items
- [add]小計金額は不要（数量と商品の価格から算出可能）。
- [add]products_idではなく、product_idにすべき。
- [add]buy numの意味がわかりにくい。せめて、スネークケースを用いる。購入数を表すのであれば、amountとかいった単語が適切。

## Buy_details
- [fix]buyテーブルと親子関係を見直す。
- [add]productsテーブルとリレーションが必要。
- [add]buy numの意味がわかりにくい。購入数を表すのであれば、amountとかいった単語が適切。
- [add]このテーブルは注文された商品一つずつを保存する。なので、小計金額を保存しない。その代わり、商品の「購入時の」価格を保存できるようにする。理由はわかりますか？？？

## Buy
- [fix]支払い方法の詳細というよりかは、カラム名が不適。動詞は使わない。名詞を使う。そして、方法情報は選択肢なのでenumを用いて表現する。そのときデータ型は？
- [fix]buyテーブルと親子関係を見直す。
- [fix]支払い合計を表す言葉がなぜかstockになっている。
- [fix]送付先住所はあるが、郵便番号と住所がない。
- 消費税カラムを作るほうがベター。


